name: ğŸğŸ¤– EatSmart CI pipeline
run-name: ğŸš€ ${{ github.actor }} have started the pipeline
on:
  push:
    branches:
      - main
      - dev/design
env:
  REGISTRY_URL: ghcr.io
  REGISTRY_USERNAME: ${{ github.repository_owner }}
  REGISTRY_PASSWORD: ${{ secrets.CR_PASSWORD }}

jobs:
  WebApp-Docker-Build:
    name: ğŸ› ï¸ğŸ³ Build the Docker image
    runs-on: ubuntu-latest
    steps:
    - name: ğŸŒ³ Clone the project
      uses: actions/checkout@v4
    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v3

    # Build the image itself
    - name: ğŸ› ï¸ğŸ³ Build and push Docker image
      uses: docker/build-push-action@v6
      with:
        context: ./tg-front
        tags: ${{ env.REGISTRY_URL }}/aieatsmart/telegram_frontend:latest
        cache-from: type=gha
        cache-to: type=gha,mode=max

  WebApp-Deploy:
    needs: [Webapp-Docker-Build]
    name: ğŸš¢ğŸ Deploy Webapp
    runs-on: ubuntu-latest
    steps:
      - name: TODO Deploy
        run: echo Deploy coming up...
